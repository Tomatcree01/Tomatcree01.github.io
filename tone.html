<!DOCTYPE html>
<html>
  <head>
    <title>Tone (eOscillator)</title>
  </head>
  <style>
    body {
      font-family: sans-serif;
      background-color: rgb(49, 55, 66);
    }

    h1 {
      color: #000000;
      animation: glitch 1s linear infinite;
    }

    @keyframes glitch {
      0% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #f44336;
      }

      20% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #3f51b5;
      }

      40% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #3f51b5, 0 0 60px #f44336;
      }

      60% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #3f51b5, 0 0 50px #f44336, 0 0 60px #f44336;
      }

      80% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #3f51b5,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #f44336;
      }

      100% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #3f51b5, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #f44336;
      }
    }

    label {
      font-weight: bold;
    }

    input[type="range"] {
      width: 80%;
      height: 5px;
      margin: 10px;
      background: #3f51b5;
      outline: none;
      border-radius: 5px;
    }

    #frequency-display,
    #volume-display {
      display: inline-block;
      margin-left: 10px;
      color: #3f51b5;
      font-weight: bold;
    }

    #play,
    #stop {
      padding: 10px;
      margin: 10px;
      background: #3f51b5;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }

    h1 {
      color: #3f51b5;
      animation: glitch 1s linear infinite;
    }

    @keyframes glitch {
      0% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #f44336;
      }

      20% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #3f51b5;
      }

      40% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #3f51b5, 0 0 60px #f44336;
      }

      60% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #f44336,
          0 0 40px #3f51b5, 0 0 50px #f44336, 0 0 60px #f44336;
      }

      80% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #f44336, 0 0 30px #3f51b5,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #f44336;
      }

      100% {
        text-shadow: 0 0 10px #f44336, 0 0 20px #3f51b5, 0 0 30px #f44336,
          0 0 40px #f44336, 0 0 50px #f44336, 0 0 60px #f44336;
      }
    }

    #play:active {
      background: #3f51b5;
      box-shadow: 0 0 5px 2px #3f51b5;
      transform: translateY(2px);
    }

    #play:hover {
      background: #f44336;
      box-shadow: 0 0 10px 2px #f44336;
      transform: scale(1.1);
    }

    #stop:hover {
      background: #f44336;
      box-shadow: 0 0 10px 2px #f44336;
      transform: scale(1.1);
    }

    #waveform-selector:hover {
      background: #f44336;
      color: white;
      cursor: pointer;
    }

    #waveform-selector:focus {
      outline: none;
    }

    #waveform-selector option:hover {
      background: #3f51b5;
      color: white;
    }

    #waveform-canvas:hover {
      box-shadow: 0 0 10px 2px #f44336;
    }

    #waveform-selector {
      margin-top: 20px;
    }

    #waveform-canvas {
      width: 80%;
      height: 100px;
      margin-top: 20px;
      background-color: #ddd;
    }

    /*# sourceMappingURL=sstyle.css.map */
  </style>

  <body>
    <h1>Tone thingy</h1>
    <label for="frequency">Frequency:</label>
    <input
      type="range"
      id="frequency"
      name="frequency"
      min="-10000"
      max="25000"
      step="60"
      value="440"
    />
    <div id="frequency-display">1 - 25000 Hz</div>
    <br />
    <label for="volume">Volume:</label>
    <input
      type="range"
      id="volume"
      name="volume"
      min="0"
      max="1"
      step="0.1"
      value="0.5"
    />
    <div id="volume-display">50%</div>
    <br />
    <label for="waveform">Waveform:</label>
    <select id="waveform-selector">
      <option value="sine">Sine</option>
      <option value="square">Square</option>
      <option value="sawtooth">Sawtooth</option>
      <option value="triangle">Triangle</option>
    </select>
    <canvas id="waveform-canvas"></canvas>
    <br />
    <button id="play">Play</button>
    <button id="stop">Stop</button>

    <script>
      var audioContext = new (window.AudioContext ||
        window.webkitAudioContext)();
      var oscillator = 0;
      var volume = audioContext.createGain();
      var frequencyInput = document.getElementById("frequency");
      var volumeInput = document.getElementById("volume");
      var waveformSelect = document.getElementById("waveform-selector");
      var playButton = document.getElementById("play");
      var stopButton = document.getElementById("stop");
      var frequencyDisplay = document.getElementById("frequency-display");
      var volumeDisplay = document.getElementById("volume-display");
      var canvas = document.getElementById("waveform-canvas");
      var canvasContext = canvas.getContext("2d");
      var canvasWidth = canvas.width;
      var canvasHeight = canvas.height;

      // Update frequency when the frequency input is changed
      frequencyInput.addEventListener("input", function () {
        if (oscillator) {
          oscillator.frequency.value = parseInt(this.value);
        }
        frequencyDisplay.innerText = this.value + " Hz";
      });

      // Update volume when the volume input is changed
      volumeInput.addEventListener("input", function () {
        volume.gain.value = parseFloat(this.value);
        var percent = parseInt(parseFloat(this.value) * 100);
        volumeDisplay.innerText = percent + `%`;
      });

      // Update waveform when the waveform selector is changed
      waveformSelect.addEventListener("change", function () {
        if (oscillator) {
          oscillator.type = waveformSelect.value;
        }
      });

      // Draw waveform visualization
      function drawWaveform() {
        canvasContext.clearRect(0, 0, canvasWidth, canvasHeight);
        canvasContext.beginPath();
        canvasContext.moveTo(0, canvasHeight / 2);
        for (var i = 0; i < canvasWidth; i++) {
          var t = i / canvasWidth;
          var value =
            oscillator.type === "sine"
              ? Math.sin(t * 2 * Math.PI)
              : oscillator.type === "square"
              ? Math.sign(Math.sin(t * 2 * Math.PI))
              : oscillator.type === "sawtooth"
              ? -1 + 2 * t
              : oscillator.type === "triangle"
              ? Math.abs(-1 + 2 * t) * 2 - 1
              : 0;
          canvasContext.lineTo(i, ((1 - value) * canvasHeight) / 2);
        }
        canvasContext.lineWidth = 2;
        canvasContext.strokeStyle = "#f44336";
        canvasContext.stroke();
      }

      // Play the oscillator when the play button is clicked
      playButton.addEventListener("click", function () {
        if (!oscillator) {
          oscillator = audioContext.createOscillator();
          oscillator.type = waveformSelect.value;
          oscillator.frequency.value = parseInt(frequencyInput.value);
          oscillator.connect(volume);
          volume.connect(audioContext.destination);
          oscillator.start();
          setInterval(drawWaveform, 10);
        }
      });

      // Stop the oscillator when the stop button is clicked
      stopButton.addEventListener("click", function () {
        if (oscillator) {
          oscillator.stop();
          oscillator = 0;
          canvasContext.clearRect(0, 0, canvasWidth, canvasHeight);
        }
      });
    </script>
  </body>
</html>
